<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Authorizing...</title>
  <script>
    // Extract the code from URL
    const params = new URLSearchParams(window.location.search);
    const code = params.get('code');
    
    if (code && window.opener) {
      // Send code to parent window (CMS)
      window.opener.postMessage(
        'authorization:github:success:' + JSON.stringify({
          code: code,
          provider: 'github'
        }),
        window.location.origin
      );
      
      // Close the popup
      window.close();
    } else if (!code) {
      document.write('<p>Authorization failed - no code received</p>');
    }
  </script>
</head>
<body>
  <p>Completing authorization...</p>
</body>
</html>

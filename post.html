<!doctype html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MDE8PXF500"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-MDE8PXF500');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Read the latest story from The She Archive." />
    <meta property="og:title" content="Post - The She Archive" />
    <meta property="og:description" content="Read the latest story from The She Archive." />
    <meta property="og:image" content="https://theshearchive.com/images/prvimg.jpeg" />
    <meta property="og:url" content="https://theshearchive.com/post.html" />
    <meta property="og:type" content="article" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Post - The She Archive" />
    <meta name="twitter:description" content="Read the latest story from The She Archive." />
    <meta name="twitter:image" content="https://theshearchive.com/images/prvimg.jpeg" />
    <link rel="canonical" href="https://theshearchive.com/post.html" />
    <title>Post - The She Archive</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/jpeg" href="/images/prvimg.jpeg" />
    <link rel="apple-touch-icon" href="/images/prvimg.jpeg" />
    <link
        href="https://fonts.googleapis.com/css2?family=Alex+Brush&family=Space+Grotesk:wght@300;400;500;600;700&family=Playfair+Display:wght@700;900&family=Noto+Sans:wght@400;500;600&display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries,typography"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#8c2bee",
                        "brand-teal": "#008080",
                        "brand-gold": "#D4AF37",
                        "background-light": "#f7f6f8",
                        "background-dark": "#191022",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "serif": ["Playfair Display", "serif"]
                    },
                },
            },
        }
    </script>
    <!-- Marked for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style type="text/tailwindcss">
        .material-symbols-outlined {
            font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24
        }
        .brand-heading {
            font-family: "Playfair Display", serif
        }
        .brand-logo {
            font-family: "Alex Brush", "Playfair Display", serif
        }
        .post-content,
        .post-content :where(h1, h2, h3, h4, h5, h6, p, li, blockquote, figcaption, em, strong, a) {
            font-family: "Times New Roman", Times, serif
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-[#141118] dark:text-white">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            <header
                class="sticky top-0 z-50 w-full whitespace-nowrap border-b border-solid border-[#f2f0f4] bg-white/95 dark:bg-background-dark/95 backdrop-blur-sm">
                <div class="px-4 py-4 md:py-6 md:px-8 lg:px-12">
                    <div class="flex flex-col items-center gap-3">
                        <nav class="flex w-full max-w-5xl items-center justify-center gap-6 md:gap-10 text-[9px] font-semibold uppercase tracking-[0.16em] text-[#3c3741] dark:text-white/70 sm:text-[11px] md:text-xs">
                            <a class="pb-1 border-b border-transparent hover:border-brand-teal hover:text-brand-teal dark:hover:border-brand-gold dark:hover:text-brand-gold transition-colors"
                                href="/stories/">Stories</a>
                            <a class="pb-1 border-b border-transparent hover:border-brand-teal hover:text-brand-teal dark:hover:border-brand-gold dark:hover:text-brand-gold transition-colors"
                                href="/inventions/">Inventions</a>
                            <a class="pb-1 border-b border-transparent hover:border-brand-teal hover:text-brand-teal dark:hover:border-brand-gold dark:hover:text-brand-gold transition-colors"
                                href="/editors-desk/">The Editor’s Desk</a>
                            <a class="pb-1 border-b border-transparent hover:border-brand-teal hover:text-brand-teal dark:hover:border-brand-gold dark:hover:text-brand-gold transition-colors"
                                href="/about/">About</a>
                        </nav>
                        <div class="w-full max-w-5xl border-t border-[#d6d6d6] dark:border-white/20"></div>
                        <a href="/"
                            class="brand-logo text-3xl font-black text-brand-teal dark:text-brand-gold text-center tracking-[0.12em] hover:opacity-80 transition-opacity md:text-4xl lg:text-5xl">The
                            She Archive</a>
                    </div>
                </div>
            </header>

            <main class="w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
                <a href="/blog.html" class="inline-flex items-center gap-2 text-brand-teal font-bold text-sm group/link">
                    <span class="material-symbols-outlined text-sm group-hover/link:-translate-x-1 transition-transform">arrow_back</span>
                    Back to Blog
                </a>
                <article id="post"
                    class="post-content mt-6 prose prose-lg lg:prose-xl max-w-none dark:prose-invert">
                    <p>Loading article...</p>
                </article>
            </main>

            <footer class="border-t border-[#e0dbe6] dark:border-white/10 py-8 sm:py-12 px-4 sm:px-6 md:px-8 lg:px-12 bg-white dark:bg-background-dark">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6 sm:gap-8">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-brand-teal text-2xl sm:text-3xl">menu_book</span>
                        <h2 class="brand-heading text-lg sm:text-xl font-black text-brand-teal dark:text-brand-gold">The She Archive</h2>
                    </div>
                    <div class="flex flex-wrap justify-center gap-6 sm:gap-8 text-[#756189] text-xs sm:text-sm">
                        <a class="hover:text-brand-teal transition-colors" href="coming-soon.html">Archive Policy</a>
                        <a class="hover:text-brand-teal transition-colors" href="coming-soon.html">Submissions</a>
                        <a class="hover:text-brand-teal transition-colors" href="coming-soon.html">Accessibility</a>
                        <a class="hover:text-brand-teal transition-colors" href="coming-soon.html">Contact</a>
                    </div>
                    <div class="flex gap-3 sm:gap-4">
                        <a class="size-9 sm:size-10 flex items-center justify-center rounded-full bg-[#f2f0f4] dark:bg-white/5 hover:bg-brand-teal/20 hover:text-brand-teal transition-all"
                            href="coming-soon.html">
                            <span class="material-symbols-outlined text-lg sm:text-xl">rss_feed</span>
                        </a>
                        <a class="size-9 sm:size-10 flex items-center justify-center rounded-full bg-[#f2f0f4] dark:bg-white/5 hover:bg-brand-teal/20 hover:text-brand-teal transition-all"
                            href="coming-soon.html">
                            <span class="material-symbols-outlined text-lg sm:text-xl">mail</span>
                        </a>
                    </div>
                </div>
                <p class="text-center text-[#756189] text-xs mt-8 sm:mt-12">
                    © 2026 Her Genius Archive. Celebrating contributions across Arts, Tech, Medical, Activism, and Science.
                </p>
            </footer>
        </div>
    </div>

    <script>
        // Function to parse front matter manually since we are on client side
        // and can't use node modules directly easily without build step bundling.
        // However, for this simple implementation, we will fetch the raw file
        // and separate the yaml header from body if present.
        function parseFrontMatter(text) {
            const pattern = /^---[\s\S]*?---/;
            const match = text.match(pattern);

            if (match) {
                const frontMatter = match[0];
                const body = text.replace(pattern, '').trim();

                // Simple extraction of title and date for display if needed
                // Real parsing would require dependencies or regex for each field
                const titleMatch = frontMatter.match(/title:\s*(.*)/);
                const dateMatch = frontMatter.match(/date:\s*(.*)/);
                const authorMatch = frontMatter.match(/author:\s*(.*)/);
                const description = extractYamlField(frontMatter, 'description');
                const image = extractYamlField(frontMatter, 'image');

                return {
                    title: titleMatch ? titleMatch[1].replace(/['"]/g, '') : 'Untitled',
                    date: dateMatch ? dateMatch[1].replace(/['"]/g, '') : '',
                    author: authorMatch ? authorMatch[1].replace(/['"]/g, '') : '',
                    body: body,
                    description: description,
                    image: image
                };
            }

            return { title: 'Untitled', body: text, description: '', image: '' };
        }

        function extractYamlField(frontMatter, field) {
            const lines = frontMatter.split('\n');
            let value = '';
            let collecting = false;

            for (const line of lines) {
                if (!collecting) {
                    if (line.startsWith(`${field}:`)) {
                        value = line.replace(`${field}:`, '').trim();
                        collecting = true;
                        if (value) break;
                    }
                } else if (/^\s+/.test(line)) {
                    value += ` ${line.trim()}`;
                } else {
                    break;
                }
            }

            return value.replace(/^['"]|['"]$/g, '');
        }

        function setMetaTag(name, content) {
            if (!content) return;
            let meta = document.querySelector(`meta[name="${name}"]`);
            if (!meta) {
                meta = document.createElement('meta');
                meta.setAttribute('name', name);
                document.head.appendChild(meta);
            }
            meta.setAttribute('content', content);
        }

        function setMetaProperty(property, content) {
            if (!content) return;
            let meta = document.querySelector(`meta[property="${property}"]`);
            if (!meta) {
                meta = document.createElement('meta');
                meta.setAttribute('property', property);
                document.head.appendChild(meta);
            }
            meta.setAttribute('content', content);
        }

        function setCanonical(url) {
            if (!url) return;
            let link = document.querySelector('link[rel="canonical"]');
            if (!link) {
                link = document.createElement('link');
                link.setAttribute('rel', 'canonical');
                document.head.appendChild(link);
            }
            link.setAttribute('href', url);
        }

        function setStructuredData(data) {
            if (!data) return;
            let script = document.getElementById('article-schema');
            if (!script) {
                script = document.createElement('script');
                script.type = 'application/ld+json';
                script.id = 'article-schema';
                document.head.appendChild(script);
            }
            script.textContent = JSON.stringify(data);
        }

        function toAbsoluteUrl(url) {
            if (!url) return '';
            if (url.startsWith('http://') || url.startsWith('https://')) return url;
            return `${window.location.origin}${url.startsWith('/') ? '' : '/'}${url}`;
        }

        function formatDate(value) {
            if (!value) return '';
            const date = new Date(value);
            if (Number.isNaN(date.getTime())) return '';
            return date.toLocaleDateString('en-GB', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        async function loadPost() {
            const params = new URLSearchParams(window.location.search);
            const slug = params.get('slug');

            if (!slug) {
                document.getElementById('post').innerHTML = '<p>Post not found.</p>';
                return;
            }

            try {
                // We fetch the Markdown file directly from content/posts/
                // Note: In a real production build, these might be processed to HTML.
                // But for this client-side setup, we fetch raw MD.
                // We need to assume the file structure is accessible. 
                // If Vercel doesn't serve `content/` folder, we might need to copy it to `public/` or `api/`
                // during build.
                // Let's assume for now we can fetch from a known path, or we adjust the build script.
                // WAIT: The build script generates the index. But it doesn't move MD files.
                // Vercel serves static files. `content` might not be served by default if it's not in public?
                // Actually, root files are usually served. But let's check.
                // If not, we might need to update the build script to copy posts to a public folder.

                // Let's try fetching from /content/posts/
                const response = await fetch(`/content/posts/${slug}.md`);

                if (!response.ok) {
                    throw new Error('Post not found');
                }

                const text = await response.text();
                const { title, date, author, body, description, image } = parseFrontMatter(text);
                const fallbackDescription = 'The She Archive preserves the stories of women history forgot to credit, restoring their names and achievements.';
                const descriptionText = description || fallbackDescription;
                const imageUrl = toAbsoluteUrl(image || '/images/prvimg.jpeg');
                const canonicalUrl = `${window.location.origin}/post.html?slug=${encodeURIComponent(slug)}`;

                document.title = `${title} | The She Archive`;
                setMetaTag('description', descriptionText);
                setMetaProperty('og:title', `${title} | The She Archive`);
                setMetaProperty('og:description', descriptionText);
                setMetaProperty('og:image', imageUrl);
                setMetaProperty('og:url', canonicalUrl);
                setMetaTag('twitter:title', `${title} | The She Archive`);
                setMetaTag('twitter:description', descriptionText);
                setMetaTag('twitter:image', imageUrl);
                setCanonical(canonicalUrl);
                setStructuredData({
                    "@context": "https://schema.org",
                    "@type": "Article",
                    headline: title,
                    datePublished: date || undefined,
                    author: {
                        "@type": "Organization",
                        name: author || 'The She Archive'
                    },
                    image: [imageUrl],
                    mainEntityOfPage: canonicalUrl
                });

                                const formattedDate = formatDate(date);
                                const postImageHtml = image ? `
                                        <div class="mt-6 w-full max-w-md aspect-square overflow-hidden rounded-xl bg-[#f2f0f4] dark:bg-white/5">
                                            <img src="${imageUrl}" alt="${title}" class="h-full w-full object-cover" />
                                        </div>
                                    ` : '';

                                document.getElementById('post').innerHTML = `
                                        <h1 class="brand-heading text-3xl sm:text-4xl md:text-5xl">${title}</h1>
                                        <p class="text-sm text-[#756189] dark:text-white/70">By ${author || 'The She Archive'}${formattedDate ? ` | ${formattedDate}` : ''}</p>
                                        ${postImageHtml}
                                        ${marked.parse(body)}
                                    `;

            } catch (error) {
                console.error(error);
                document.getElementById('post').innerHTML = '<p>Error loading post.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', loadPost);
    </script>
</body>

</html>